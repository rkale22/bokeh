<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Bokeh Plot</title>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-2.4.3.min.js"></script>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.4.3.min.js"></script>
    <script type="text/javascript">
        Bokeh.set_log_level("info");
    </script>
  </head>
  <body>
    <div class="bk-root" id="e0c32420-63c8-4cce-9ad8-0914e3b5ba0b" data-root-id="1206"></div>
  
    <script type="application/json" id="1397">
      {"0fa9fdb9-44f7-4e5d-81e7-a4df9b5be60a":{"defs":[],"roots":{"references":[{"attributes":{"children":[{"id":"1205"},{"id":"1138"}]},"id":"1206","type":"Column"},{"attributes":{"axis":{"id":"1149"},"coordinates":null,"group":null,"ticker":null},"id":"1152","type":"Grid"},{"attributes":{"data":{"Age_Groups":["0-14 years","15-64 years","65 years and over"],"Female":[0,0,0],"Male":[0,0,0]},"selected":{"id":"1184"},"selection_policy":{"id":"1183"}},"id":"1136","type":"ColumnDataSource"},{"attributes":{"source":{"id":"1136"}},"id":"1193","type":"CDSView"},{"attributes":{"axis":{"id":"1153"},"coordinates":null,"dimension":1,"group":null,"ticker":null},"id":"1155","type":"Grid"},{"attributes":{},"id":"1181","type":"BasicTickFormatter"},{"attributes":{"below":[{"id":"1149"}],"center":[{"id":"1152"},{"id":"1155"},{"id":"1186"}],"height":300,"left":[{"id":"1153"}],"renderers":[{"id":"1174"},{"id":"1192"}],"title":{"id":"1139"},"toolbar":{"id":"1163"},"x_range":{"id":"1141"},"x_scale":{"id":"1145"},"y_range":{"id":"1143"},"y_scale":{"id":"1147"}},"id":"1138","subtype":"Figure","type":"Plot"},{"attributes":{},"id":"1182","type":"AllLabels"},{"attributes":{},"id":"1179","type":"AllLabels"},{"attributes":{},"id":"1183","type":"UnionRenderers"},{"attributes":{},"id":"1147","type":"CategoricalScale"},{"attributes":{"coordinates":null,"group":null,"text":"Population Pyramid"},"id":"1139","type":"Title"},{"attributes":{},"id":"1159","type":"SaveTool"},{"attributes":{},"id":"1178","type":"CategoricalTickFormatter"},{"attributes":{"coordinates":null,"group":null,"items":[{"id":"1187"},{"id":"1204"}]},"id":"1186","type":"Legend"},{"attributes":{},"id":"1184","type":"Selection"},{"attributes":{"source":{"id":"1136"}},"id":"1175","type":"CDSView"},{"attributes":{"factors":["0-14 years","15-64 years","65 years and over"]},"id":"1143","type":"FactorRange"},{"attributes":{},"id":"1161","type":"HelpTool"},{"attributes":{},"id":"1145","type":"LinearScale"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"blue"},"hatch_alpha":{"value":0.1},"hatch_color":{"value":"blue"},"height":{"value":0.3},"line_alpha":{"value":0.1},"line_color":{"value":"blue"},"right":{"field":"Male"},"y":{"field":"Age_Groups"}},"id":"1172","type":"HBar"},{"attributes":{"axis_label":"Age Group","coordinates":null,"formatter":{"id":"1178"},"group":null,"major_label_policy":{"id":"1179"},"ticker":{"id":"1154"}},"id":"1153","type":"CategoricalAxis"},{"attributes":{},"id":"1154","type":"CategoricalTicker"},{"attributes":{"label":{"value":"Male"},"renderers":[{"id":"1174"}]},"id":"1187","type":"LegendItem"},{"attributes":{"tools":[{"id":"1156"},{"id":"1157"},{"id":"1158"},{"id":"1159"},{"id":"1160"},{"id":"1161"}]},"id":"1163","type":"Toolbar"},{"attributes":{"overlay":{"id":"1162"}},"id":"1158","type":"BoxZoomTool"},{"attributes":{"bottom_units":"screen","coordinates":null,"fill_alpha":0.5,"fill_color":"lightgrey","group":null,"left_units":"screen","level":"overlay","line_alpha":1.0,"line_color":"black","line_dash":[4,4],"line_width":2,"right_units":"screen","syncable":false,"top_units":"screen"},"id":"1162","type":"BoxAnnotation"},{"attributes":{"coordinates":null,"data_source":{"id":"1136"},"glyph":{"id":"1171"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1173"},"nonselection_glyph":{"id":"1172"},"view":{"id":"1175"}},"id":"1174","type":"GlyphRenderer"},{"attributes":{"end":21.5,"js_property_callbacks":{"change:value":[{"id":"1137"}]},"start":1.7,"step":0.1,"title":"Threshold","value":1.7},"id":"1205","type":"Slider"},{"attributes":{},"id":"1160","type":"ResetTool"},{"attributes":{"coordinates":null,"data_source":{"id":"1136"},"glyph":{"id":"1189"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1191"},"nonselection_glyph":{"id":"1190"},"view":{"id":"1193"}},"id":"1192","type":"GlyphRenderer"},{"attributes":{"end":2595737039,"start":-2595737039},"id":"1141","type":"Range1d"},{"attributes":{"label":{"value":"Female"},"renderers":[{"id":"1192"}]},"id":"1204","type":"LegendItem"},{"attributes":{},"id":"1157","type":"WheelZoomTool"},{"attributes":{},"id":"1150","type":"BasicTicker"},{"attributes":{"fill_alpha":{"value":0.2},"fill_color":{"value":"blue"},"hatch_alpha":{"value":0.2},"hatch_color":{"value":"blue"},"height":{"value":0.3},"line_alpha":{"value":0.2},"line_color":{"value":"blue"},"right":{"field":"Male"},"y":{"field":"Age_Groups"}},"id":"1173","type":"HBar"},{"attributes":{"fill_alpha":{"value":0.2},"fill_color":{"value":"pink"},"hatch_alpha":{"value":0.2},"hatch_color":{"value":"pink"},"height":{"value":0.3},"line_alpha":{"value":0.2},"line_color":{"value":"pink"},"right":{"field":"Female"},"y":{"field":"Age_Groups"}},"id":"1191","type":"HBar"},{"attributes":{"args":{"aggregated_df":{"Female":[940797401,2532780848,441482834,940795953,2532772290,441476517,940656654,2532400761,441453812,940605320,2532221040,441436104,938809620,2529369349,441242891,914293408,2467225028,434284976,913107252,2464669999,434089300,870891052,2391604481,427751792,862417163,2382168900,427263297,688131983,1905688823,375173398,688131286,1905686278,375172776,681066969,1893088785,374401071,597918760,1727341122,358133915,575420429,1693668189,355897088,568383778,1673570383,353671067,541962904,1629656632,349145392,536619039,1621218988,348554092,516349038,1594508152,346777233,483428637,1544375384,342023468,483125444,1543518416,341980797,462330737,1511095136,340041373,438407250,1453741612,331503060,437270749,1452151580,331397798,427164151,1420212823,326592640,415570994,1384507237,321695253,415561479,1384473759,321688771,413728780,1379699325,321176808,389248663,1330227153,316526633,381578448,1314109425,315204219,367546755,1277571463,311602972,359033113,1266151416,310863826,354021725,1252822971,310073633,241025852,771097358,202728290,240326773,769100582,202513513,240261027,768846905,202449100,233786135,753801332,200675332,233358771,751678230,200236278,211739441,699143956,193936954,198141168,663468691,187759202,197411012,660221763,186669605,188940525,638245911,181218879,188606852,637303777,181069866,183554892,629328669,180297021,179761230,616937164,178742546,179697752,616802297,178731674,179168298,615081308,178316186,178751436,613181695,177682340,175436128,605545002,176048570,170952909,595071734,174621579,147488406,519098889,151756357,147114857,517403556,151031945,144659577,511016744,150119063,144159392,509123938,149842609,144059877,508687667,149739209,142698995,505625831,149512835,141552439,502888777,148899439,138195938,484663779,143509245,135631470,476601720,141818380,126973139,455071519,139386795,126501898,452871624,138609093,124711713,450280469,138491604,124239239,449401604,138428379,117506692,429297587,135106650,117501596,429269168,135098439,116418924,424783858,133476468,115366513,423156725,133368324,113341033,417718485,131659078,109258758,395937250,122924619,108718615,394524931,122691206,106718897,386944553,120884627,105619198,384207083,120542005,99827515,367752046,116702155,78679225,290898542,103559386,78209249,289044320,102899032,77567840,285654946,101549115,72120710,261509778,93655715,72087721,261368217,93598754,64717272,225387041,73353832,62358287,216179805,70046962,60893979,210920149,68274252,60280580,208012916,67233762,60251739,207937730,67227074,59252809,204473710,66238065,53631284,182841683,59200878,47335198,161190374,50676367,46460851,157543058,49666091,40787124,131445657,38841920,37857068,119221580,34574654,37844893,119196135,34572374,30157914,108111470,33967564,30156070,108104494,33965817,1662,3664,547],"Groups":["0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over","0-14 years","15-64 years","65 years and over"],"Male":[999784527,2595737039,356032162,999783005,2595728401,356027048,999642640,2595443913,356009291,999588117,2595278956,355992543,997716890,2592361288,355802692,972388639,2533504384,349733353,971169908,2530976741,349564211,927167037,2454427920,344081578,918663795,2445697905,343731519,726404944,1937109353,299056938,726404178,1937106640,299056342,719310205,1924437068,298438294,632589176,1757866147,284513263,609768150,1724520383,282625432,602373593,1705023802,280906755,575518212,1661576714,277543931,570067194,1653094841,277037436,549322017,1628499935,275638854,515712884,1578049559,271824326,515402953,1575532038,271768620,494259053,1543499496,270125145,468937419,1485228183,262600752,467778155,1483630072,262512429,457126270,1450987254,258643647,444150479,1414706805,255296843,444140792,1414671184,255290822,442242586,1409853202,254859522,416680862,1359492486,251684117,408646183,1344550414,250487122,393960241,1306561944,247354216,385398480,1295631303,246773496,380175210,1274257484,245795617,251663290,764058036,153113450,250945296,762089021,152945617,250875029,761822482,152891036,244154046,747085331,151268121,243696027,744936860,150888748,221134824,695208548,145941226,206850401,659244135,141036693,206077121,656150852,140488467,197297028,634358896,136692017,196950462,633444688,136556629,191728009,625995744,135960153,187739666,613628777,134803978,187673506,613494758,134794237,187117449,611753231,134433761,186676769,609840428,134008815,183261841,602422358,132949574,178605503,591865883,132090399,154016631,520337591,120256167,153620324,518641114,119770244,151052342,512154835,119003378,150528170,510225685,118794942,150423220,509741598,118715045,149011885,506715816,118555317,147811164,503876692,118048781,144294598,484542862,113825102,141619158,476540227,112509507,132902368,455246436,110732184,132401219,453018829,110181511,130580231,450542543,110069574,130097799,449708542,110023339,123081628,430591810,107406729,123076202,430561965,107398258,121937083,425936420,106230369,120833076,424359318,106146938,118730471,418901502,104776660,114455348,397629628,97924328,113885909,396184990,97720172,111797171,388605429,96417925,110643536,386123983,96154385,104495276,369533587,93248062,82411104,293921540,83399087,81915217,292021358,82832724,81242544,288747157,81937148,75500417,264495535,75732816,75465547,264343608,75683986,67630073,227965422,59774955,65154551,218644526,57066901,63607567,213114353,55514457,62961907,210200297,54694435,62932033,210129942,54689688,61888653,206640689,53899874,55985529,184639544,47946546,49381453,162793168,41357839,48454996,159100595,40522834,42549872,132165706,31737962,39452287,119798534,28107382,39439645,119772297,28105195,31512897,108358643,27590048,31510931,108349978,27589467,1745,3703,318],"Threshold":[1.7,1.7,1.7,2.0,2.0,2.0,2.4,2.4,2.4,2.5,2.5,2.5,2.6,2.6,2.6,2.7,2.7,2.7,2.8,2.8,2.8,2.9,2.9,2.9,3.0,3.0,3.0,3.2,3.2,3.2,3.3,3.3,3.3,3.4,3.4,3.4,3.5,3.5,3.5,3.7,3.7,3.7,3.8,3.8,3.8,3.9,3.9,3.9,4.0,4.0,4.0,4.1,4.1,4.1,4.2,4.2,4.2,4.3,4.3,4.3,4.4,4.4,4.4,4.5,4.5,4.5,4.6,4.6,4.6,4.7,4.7,4.7,4.8,4.8,4.8,4.9,4.9,4.9,5.1,5.1,5.1,5.2,5.2,5.2,5.3,5.3,5.3,5.4,5.4,5.4,5.5,5.5,5.5,5.6,5.6,5.6,5.7,5.7,5.7,5.8,5.8,5.8,6.0,6.0,6.0,6.1,6.1,6.1,6.2,6.2,6.2,6.3,6.3,6.3,6.4,6.4,6.4,6.5,6.5,6.5,6.6,6.6,6.6,6.7,6.7,6.7,6.8,6.8,6.8,6.9,6.9,6.9,7.1,7.1,7.1,7.2,7.2,7.2,7.3,7.3,7.3,7.5,7.5,7.5,7.6,7.6,7.6,7.8,7.8,7.8,7.9,7.9,7.9,8.0,8.0,8.0,8.1,8.1,8.1,8.2,8.2,8.2,8.3,8.3,8.3,8.4,8.4,8.4,8.5,8.5,8.5,8.6,8.6,8.6,8.7,8.7,8.7,8.8,8.8,8.8,8.9,8.9,8.9,9.0,9.0,9.0,9.1,9.1,9.1,9.2,9.2,9.2,9.4,9.4,9.4,9.5,9.5,9.5,9.6,9.6,9.6,9.7,9.7,9.7,9.8,9.8,9.8,9.9,9.9,9.9,10.0,10.0,10.0,10.3,10.3,10.3,10.5,10.5,10.5,10.6,10.6,10.6,10.7,10.7,10.7,10.8,10.8,10.8,10.9,10.9,10.9,11.1,11.1,11.1,11.4,11.4,11.4,11.5,11.5,11.5,11.6,11.6,11.6,11.8,11.8,11.8,12.0,12.0,12.0,12.2,12.2,12.2,12.5,12.5,12.5,12.8,12.8,12.8,12.9,12.9,12.9,13.0,13.0,13.0,15.5,15.5,15.5,18.4,18.4,18.4,18.8,18.8,18.8,21.5,21.5,21.5]},"source":{"id":"1136"}},"code":"\n    var threshold = cb_obj.value;\n    var data = source.data;\n    var new_male = [];\n    var new_female = [];\n\n    // Find the closest threshold that is less than or equal to the slider value\n    var closest_threshold = aggregated_df['Threshold'][0];\n    for (var t of aggregated_df['Threshold']) {\n        if (t &lt;= threshold &amp;&amp; t &gt; closest_threshold) {\n            closest_threshold = t;\n        }\n    }\n\n    // Update data based on the closest threshold\n    for (var i = 0; i &lt; aggregated_df['Threshold'].length; i++) {\n        if (aggregated_df['Threshold'][i] === closest_threshold) {\n            new_male.push(-aggregated_df['Male'][i]); // Negative values for males to go left\n            new_female.push(aggregated_df['Female'][i]); // Positive values for females to go right\n        }\n    }\n\n    // Update the data source with new values\n    data['Male'] = new_male;\n    data['Female'] = new_female;\n    source.change.emit();  // Trigger update of the data source\n"},"id":"1137","type":"CustomJS"},{"attributes":{},"id":"1156","type":"PanTool"},{"attributes":{"fill_color":{"value":"pink"},"hatch_color":{"value":"pink"},"height":{"value":0.3},"line_color":{"value":"pink"},"right":{"field":"Female"},"y":{"field":"Age_Groups"}},"id":"1189","type":"HBar"},{"attributes":{"axis_label":"Population","coordinates":null,"formatter":{"id":"1181"},"group":null,"major_label_policy":{"id":"1182"},"ticker":{"id":"1150"}},"id":"1149","type":"LinearAxis"},{"attributes":{"fill_color":{"value":"blue"},"hatch_color":{"value":"blue"},"height":{"value":0.3},"line_color":{"value":"blue"},"right":{"field":"Male"},"y":{"field":"Age_Groups"}},"id":"1171","type":"HBar"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"pink"},"hatch_alpha":{"value":0.1},"hatch_color":{"value":"pink"},"height":{"value":0.3},"line_alpha":{"value":0.1},"line_color":{"value":"pink"},"right":{"field":"Female"},"y":{"field":"Age_Groups"}},"id":"1190","type":"HBar"}],"root_ids":["1206"]},"title":"Bokeh Application","version":"2.4.3"}}
    </script>
    <script type="text/javascript">
      (function() {
        const fn = function() {
          Bokeh.safely(function() {
            (function(root) {
              function embed_document(root) {
              const docs_json = document.getElementById('1397').textContent;
              const render_items = [{"docid":"0fa9fdb9-44f7-4e5d-81e7-a4df9b5be60a","root_ids":["1206"],"roots":{"1206":"e0c32420-63c8-4cce-9ad8-0914e3b5ba0b"}}];
              root.Bokeh.embed.embed_items(docs_json, render_items);
              }
              if (root.Bokeh !== undefined) {
                embed_document(root);
              } else {
                let attempts = 0;
                const timer = setInterval(function(root) {
                  if (root.Bokeh !== undefined) {
                    clearInterval(timer);
                    embed_document(root);
                  } else {
                    attempts++;
                    if (attempts > 100) {
                      clearInterval(timer);
                      console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
                    }
                  }
                }, 10, root)
              }
            })(window);
          });
        };
        if (document.readyState != "loading") fn();
        else document.addEventListener("DOMContentLoaded", fn);
      })();
    </script>
  </body>
</html>